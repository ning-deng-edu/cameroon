
//Working query for querying person's intro answer
select uuid from latestNonDeletedAentValue where latestNonDeletedAentValue.AttributeID=(select AttributeID from AttributeKey where AttributeName='AnswerQuestionnaireID') and latestNonDeletedAentValue.measure in (select uuid from latestNonDeletedAentValue where latestNonDeletedAentValue.AttributeID=(select AttributeID from AttributeKey where AttributeName='QuestionnaireType') and latestNonDeletedAentValue.measure='Introductory') and uuid in (select uuid from AentReln where RelationshipID in (select RelationshipID from AentReln where AentReln.uuid='1000011445266283525') and RelationshipID in (select RelationshipID from latestNonDeletedRelationship where RelnTypeID=(select RelnTypeID from RelnType where RelnTypeName='Answer and Interviewee') and latestNonDeletedRelationship.Deleted is null))


// working query for querying the person's intro answer and session
select uuid from AentReln where RelationshipID in (select RelationshipID from AentReln where RelationshipID in (select RelationshipID from latestNonDeletedRelationship where RelnTypeID=(select RelnTypeID from RelnType where RelnTypeName='Answer and Session' ) and latestNonDeletedRelationship. Deleted IS NULL) and AentReln.uuid in ( select uuid from latestNonDeletedAentValue where latestNonDeletedAentValue.AttributeID=(select AttributeID from AttributeKey where AttributeName='AnswerQuestionnaireID') and latestNonDeletedAentValue.measure in (select uuid from latestNonDeletedAentValue where latestNonDeletedAentValue.AttributeID=(select AttributeID from AttributeKey where AttributeName='QuestionnaireType') and latestNonDeletedAentValue.measure='Introductory') and uuid in (select uuid from AentReln where RelationshipID in (select RelationshipID from AentReln where AentReln.uuid='1000011445266283525') and RelationshipID in (select RelationshipID from latestNonDeletedRelationship where RelnTypeID=(select RelnTypeID from RelnType where RelnTypeName='Answer and Interviewee') and latestNonDeletedRelationship.Deleted is null))))

//working query for querying the person's intro session
select uuid,measure from latestNonDeletedAentValue where AttributeID=(SELECT AttributeID FROM AttributeKey WHERE AttributeName='SessionName')  and uuid in (select uuid from AentReln where RelationshipID in (select RelationshipID from AentReln where RelationshipID in (select RelationshipID from latestNonDeletedRelationship where RelnTypeID=(select RelnTypeID from RelnType where RelnTypeName='Answer and Session' ) and latestNonDeletedRelationship. Deleted IS NULL) and AentReln.uuid in ( select uuid from latestNonDeletedAentValue where latestNonDeletedAentValue.AttributeID=(select AttributeID from AttributeKey where AttributeName='AnswerQuestionnaireID') and latestNonDeletedAentValue.measure in (select uuid from latestNonDeletedAentValue where latestNonDeletedAentValue.AttributeID=(select AttributeID from AttributeKey where AttributeName='QuestionnaireType') and latestNonDeletedAentValue.measure='Introductory') and uuid in (select uuid from AentReln where RelationshipID in (select RelationshipID from AentReln where AentReln.uuid='1000011445266283525') and RelationshipID in (select RelationshipID from latestNonDeletedRelationship where RelnTypeID=(select RelnTypeID from RelnType where RelnTypeName='Answer and Interviewee') and latestNonDeletedRelationship.Deleted is null)))))

//working query for selecting the intro quesnir type uuid
select uuid from latestNonDeletedAentValue where AttributeID= (select AttributeID from AttributeKey where AttributeName='QuesnirTypeName') and measure = 'Introductory'

//working query for selecting the intro quesnir uuid
select uuid from latestNonDeletedAentValue where latestNonDeletedAentValue.AttributeID=(select AttributeID from AttributeKey where AttributeName='QuestionnaireType') and measure= (select uuid from latestNonDeletedAentValue where AttributeID= (select AttributeID from AttributeKey where AttributeName='QuesnirTypeName') and measure = 'Introductory')

//working query for selecting the intro answer uuid
select uuid from latestNonDeletedAentValue where latestNonDeletedAentValue.AttributeID=(select AttributeID from AttributeKey where AttributeName='AnswerQuestionnaireID') and latestNonDeletedAentValue.measure in(select uuid from latestNonDeletedAentValue where latestNonDeletedAentValue.AttributeID=(select AttributeID from AttributeKey where AttributeName='QuestionnaireType') and measure=(select uuid from latestNonDeletedAentValue where AttributeID= (select AttributeID from AttributeKey where AttributeName='QuesnirTypeName') and measure = 'Introductory'))

select uuid,measure from latestNonDeletedAentValue where AttributeID=(select AttributeID from AttributeKey where AttributeName='SessionName') and uuid in ( select uuid from AentReln where RelationshipID in(select RelationshipID from AentReln where RelationshipID in (select RelationshipID from latestNonDeletedRelationship where RelnTypeID=(select RelnTypeID from RelnType where RelnTypeName='Answer and Session' ) and latestNonDeletedRelationship.Deleted IS NULL) and uuid in(select uuid from latestNonDeletedAentValue where latestNonDeletedAentValue.AttributeID=(select AttributeID from AttributeKey where AttributeName='AnswerQuestionnaireID') and latestNonDeletedAentValue.measure in(select uuid from latestNonDeletedAentValue where latestNonDeletedAentValue.AttributeID=(select AttributeID from AttributeKey where AttributeName='QuestionnaireType') and measure=(select uuid from latestNonDeletedAentValue where AttributeID= (select AttributeID from AttributeKey where AttributeName='QuesnirTypeName') and measure = 'Introductory')))

//working query selecting all session ids
select uuid,measure from latestNonDeletedAentValue where AttributeID=(select AttributeID from AttributeKey where AttributeName='SessionID') and uuid in ( select uuid from AentReln where RelationshipID in(select RelationshipID from AentReln where RelationshipID in (select RelationshipID from latestNonDeletedRelationship where RelnTypeID=(select RelnTypeID from RelnType where RelnTypeName='Answer and Session' ) and latestNonDeletedRelationship.Deleted IS NULL)))

//working query selecting all undeleted session ids
select uuid,measure from latestNonDeletedArchEntIdentifiers where AttributeID=(select AttributeID from AttributeKey where AttributeName='SessionID') and uuid in ( select uuid from AentReln where RelationshipID in(select RelationshipID from AentReln where RelationshipID in (select RelationshipID from latestNonDeletedRelationship where RelnTypeID=(select RelnTypeID from RelnType where RelnTypeName='Answer and Session' ) and latestNonDeletedRelationship.Deleted IS NULL)))

//working query selecting all undeleted intro session ids
select uuid,measure from latestNonDeletedArchEntIdentifiers where AttributeID=(select AttributeID from AttributeKey where AttributeName='SessionID') and uuid in ( select uuid from AentReln where RelationshipID in(select RelationshipID from AentReln where RelationshipID in (select RelationshipID from latestNonDeletedRelationship where RelnTypeID=(select RelnTypeID from RelnType where RelnTypeName='Answer and Session' ) and latestNonDeletedRelationship.Deleted IS NULL) and uuid in (select uuid from latestNonDeletedAentValue where latestNonDeletedAentValue.AttributeID=(select AttributeID from AttributeKey where AttributeName='AnswerQuestionnaireID') and latestNonDeletedAentValue.measure in(select uuid from latestNonDeletedAentValue where latestNonDeletedAentValue.AttributeID=(select AttributeID from AttributeKey where AttributeName='QuestionnaireType') and measure=(select uuid from latestNonDeletedAentValue where AttributeID= (select AttributeID from AttributeKey where AttributeName='QuesnirTypeName') and measure = 'Introductory')))))

//working query selecting reln ids for a person in which the person is a consultant
select uuid from latestNonDeletedArchEntIdentifiers where AttributeID=(select AttributeID from AttributeKey where AttributeName='SessionIDforPerson') and uuid in (select uuid from latestNonDeletedAentValue where AttributeID=(select AttributeID from AttributeKey where AttributeName='SessionPersonRole') and measure=(select uuid from latestNonDeletedAentValue where AttributeID=(select AttributeID from AttributeKey where AttributeName='PersonRoleName') and measure='consultant') and uuid in (select uuid from latestNonDeletedAentValue where AttributeID=(select AttributeID from AttributeKey where AttributeName='SessionPersonName') and measure ='1000011448486699495'))

//working query selecting session ids for a person in which the person is a consultant
select measure from latestNonDeletedArchEntIdentifiers where AttributeID=(select AttributeID from AttributeKey where AttributeName='SessionIDforPerson') and uuid in (select uuid from latestNonDeletedAentValue where AttributeID=(select AttributeID from AttributeKey where AttributeName='SessionPersonRole') and measure=(select uuid from latestNonDeletedAentValue where AttributeID=(select AttributeID from AttributeKey where AttributeName='PersonRoleName') and measure='consultant') and uuid in (select uuid from latestNonDeletedAentValue where AttributeID=(select AttributeID from AttributeKey where AttributeName='SessionPersonName') and measure ='1000011448486699495'))

//working query selecting undeleted intro session ids for a person
select uuid,measure from latestNonDeletedArchEntIdentifiers where AttributeID=(select AttributeID from AttributeKey where AttributeName='SessionID') and uuid in ( select uuid from AentReln where RelationshipID in(select RelationshipID from AentReln where RelationshipID in (select RelationshipID from latestNonDeletedRelationship where RelnTypeID=(select RelnTypeID from RelnType where RelnTypeName='Answer and Session' ) and latestNonDeletedRelationship.Deleted IS NULL) and uuid in (select uuid from latestNonDeletedAentValue where latestNonDeletedAentValue.AttributeID=(select AttributeID from AttributeKey where AttributeName='AnswerQuestionnaireID') and latestNonDeletedAentValue.measure in(select uuid from latestNonDeletedAentValue where latestNonDeletedAentValue.AttributeID=(select AttributeID from AttributeKey where AttributeName='QuestionnaireType') and measure=(select uuid from latestNonDeletedAentValue where AttributeID= (select AttributeID from AttributeKey where AttributeName='QuesnirTypeName') and measure = 'Introductory')))))and uuid in (select measure from latestNonDeletedArchEntIdentifiers where AttributeID=(select AttributeID from AttributeKey where AttributeName='SessionIDforPerson') and uuid in (select uuid from latestNonDeletedAentValue where AttributeID=(select AttributeID from AttributeKey where AttributeName='SessionPersonRole') and measure=(select uuid from latestNonDeletedAentValue where AttributeID=(select AttributeID from AttributeKey where AttributeName='PersonRoleName') and measure='consultant') and uuid in (select uuid from latestNonDeletedAentValue where AttributeID=(select AttributeID from AttributeKey where AttributeName='SessionPersonName') and measure ='1000011448486699495')))

//working query selecting answers that are not in a session
select uuid,measure from latestNonDeletedArchEntIdentifiers where AttributeID=(select AttributeID from AttributeKey where AttributeName='AnswerLabel') and uuid NOT IN(select uuid from AentReln where RelationshipID in (select RelationshipID from latestNonDeletedRelationship where RelnTypeID=(select RelnTypeID from RelnType where RelnTypeName='Answer and Session') and latestNonDeletedRelationship.Deleted IS NULL))

//working query selecting answers that are not intro answer
select uuid,measure from latestNonDeletedArchEntIdentifiers where AttributeID=(select AttributeID from AttributeKey where AttributeName='AnswerLabel') and uuid not in (select uuid from latestNonDeletedAentValue where latestNonDeletedAentValue.AttributeID=(select AttributeID from AttributeKey where AttributeName='AnswerQuestionnaireID') and latestNonDeletedAentValue.measure in(select uuid from latestNonDeletedAentValue where latestNonDeletedAentValue.AttributeID=(select AttributeID from AttributeKey where AttributeName='QuestionnaireType') and measure=(select uuid from latestNonDeletedAentValue where AttributeID= (select AttributeID from AttributeKey where AttributeName='QuesnirTypeName') and measure = 'Introductory')))

//working query selecting intro ans that are not in a session
select uuid,measure from latestNonDeletedArchEntIdentifiers where AttributeID=(select AttributeID from AttributeKey where AttributeName='AnswerLabel') and uuid in (select uuid from latestNonDeletedAentValue where latestNonDeletedAentValue.AttributeID=(select AttributeID from AttributeKey where AttributeName='AnswerQuestionnaireID') and latestNonDeletedAentValue.measure in(select uuid from latestNonDeletedAentValue where latestNonDeletedAentValue.AttributeID=(select AttributeID from AttributeKey where AttributeName='QuestionnaireType') and measure=(select uuid from latestNonDeletedAentValue where AttributeID= (select AttributeID from AttributeKey where AttributeName='QuesnirTypeName') and measure = 'Introductory'))) and uuid NOT IN(select uuid from AentReln where RelationshipID in (select RelationshipID from latestNonDeletedRelationship where RelnTypeID=(select RelnTypeID from RelnType where RelnTypeName='Answer and Session') and latestNonDeletedRelationship.Deleted IS NULL))

//working query selecting Non-intro ans that are not in a session
select uuid,measure from latestNonDeletedArchEntIdentifiers where AttributeID=(select AttributeID from AttributeKey where AttributeName='AnswerLabel') and uuid not in (select uuid from latestNonDeletedAentValue where latestNonDeletedAentValue.AttributeID=(select AttributeID from AttributeKey where AttributeName='AnswerQuestionnaireID') and latestNonDeletedAentValue.measure in(select uuid from latestNonDeletedAentValue where latestNonDeletedAentValue.AttributeID=(select AttributeID from AttributeKey where AttributeName='QuestionnaireType') and measure=(select uuid from latestNonDeletedAentValue where AttributeID= (select AttributeID from AttributeKey where AttributeName='QuesnirTypeName') and measure = 'Introductory'))) and uuid NOT IN(select uuid from AentReln where RelationshipID in (select RelationshipID from latestNonDeletedRelationship where RelnTypeID=(select RelnTypeID from RelnType where RelnTypeName='Answer and Session') and latestNonDeletedRelationship.Deleted IS NULL))

//duplicate label search
SELECT uuid,measure FROM latestNonDeletedAentValue WHERE AttributeID = (SELECT AttributeID FROM AttributeKey WHERE AttributeName='AnswerLabel') and measure LIKE 'tstQues2_Answer_Mary Cons_2015-12-27' OR measure LIKE 'tstQues2_Answer_Mary Cons_2015-12-27(%)'

SELECT uuid,measure FROM latestNonDeletedAentValue where AttributeID=(select AttributeID from AttributeKey where AttributeName='AnswerLabel') and measure like 'tstQues5_Answer_Mary Cons_2015-12-27' or measure like 'tstQues5_Answer_Mary Cons_2015-12-27(%)'

//working for select relationshipid and person id of a consultant in a session
select RelationshipID, uuid from latestNonDeletedAentReln where uuid <>'1000011452033468812' and RelationshipID in (select RelationshipID from latestNonDeletedAentReln where uuid='1000011452033468812' and RelationshipID in (select RelationshipID from latestNonDeletedRelationship where RelnTypeID=(select RelnTypeID from RelnType where RelnTypeName='Session and Consultant') and latestNonDeletedRelationship.Deleted IS NULL))

select RelationshipID from latestNonDeletedAentReln where uuid='1000011452033468812' and RelationshipID in (select RelationshipID from latestNonDeletedRelationship where RelnTypeID=(select RelnTypeID from RelnType where RelnTypeName='Session and Consultant') and latestNonDeletedRelationship.Deleted IS NULL)